{"version":3,"sources":["file:///C:/Users/agukp/Snake%20Match/assets/Scripts/SnakeController.ts"],"names":["_decorator","Component","RigidBody2D","Vec2","KeyCode","input","Input","ccclass","SnakeController","character","firstMove","velocity","snakeInside","onLoad","node","getComponent","linearVelocity","on","EventType","KEY_DOWN","onKeyDown","onDestroy","off","event","x","keyCode","KEY_W","ARROW_UP","tileMove","KEY_S","ARROW_DOWN","y","KEY_A","ARROW_LEFT","KEY_D","ARROW_RIGHT","setPosition","Math","round","position","eatBall","ball"],"mappings":"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","sourcesContent":["import {\r\n  _decorator,\r\n  Component,\r\n  RigidBody2D,\r\n  Vec2,\r\n  KeyCode,\r\n  input,\r\n  EventKeyboard,\r\n  Input,\r\n} from \"cc\";\r\nconst { ccclass } = _decorator;\r\n\r\ntype Balls = \"green\" | \"blue\" | \"red\" | \"yellow\";\r\n\r\n@ccclass(\"SnakeController\")\r\nexport class SnakeController extends Component {\r\n  private character: RigidBody2D = null;\r\n\r\n  private firstMove: boolean = true;\r\n\r\n  private velocity: number = 5;\r\n\r\n  private snakeInside: Array<Balls> = [];\r\n\r\n  public onLoad(): void {\r\n    this.character = this.node.getComponent(RigidBody2D);\r\n\r\n    this.character.linearVelocity = new Vec2(0, 0);\r\n\r\n    input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n  }\r\n\r\n  public onDestroy(): void {\r\n    input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n  }\r\n\r\n  private onKeyDown(event: EventKeyboard): void {\r\n    if (this.character.linearVelocity.x != 0 || this.firstMove) {\r\n      switch (event.keyCode) {\r\n        case KeyCode.KEY_W:\r\n        case KeyCode.ARROW_UP:\r\n          this.character.linearVelocity = new Vec2(0, this.velocity);\r\n          this.tileMove();\r\n          break;\r\n        case KeyCode.KEY_S:\r\n        case KeyCode.ARROW_DOWN:\r\n          this.character.linearVelocity = new Vec2(0, -this.velocity);\r\n          this.tileMove();\r\n          break;\r\n      }\r\n    } else if (this.character.linearVelocity.y != 0 || this.firstMove) {\r\n      switch (event.keyCode) {\r\n        case KeyCode.KEY_A:\r\n        case KeyCode.ARROW_LEFT:\r\n          this.tileMove();\r\n          this.character.linearVelocity = new Vec2(-this.velocity, 0);\r\n          break;\r\n        case KeyCode.KEY_D:\r\n        case KeyCode.ARROW_RIGHT:\r\n          this.character.linearVelocity = new Vec2(this.velocity, 0);\r\n          this.tileMove();\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  private tileMove(): void {\r\n    this.firstMove = false;\r\n    this.node.setPosition(\r\n      Math.round(this.node.position.x / 30) * 30,\r\n      Math.round(this.node.position.y / 30) * 30\r\n    );\r\n  }\r\n\r\n  private eatBall(ball: Balls): void {}\r\n}\r\n"]}